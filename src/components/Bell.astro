---
import { Image } from "astro:assets";
import bell from "@assets/bell.svg";
---

<div class="relative">
  <!-- Floating Logo Button -->
  <button
    id="bell-button"
    class="fixed bottom-20 right-5 z-30 p-3 bg-primary-100 rounded-full shadow-lg transition-transform duration-200 transform hover:scale-110"
    aria-label="Toggle panel"
  >
    <Image src={bell} alt="bellButton" width={35} />
  </button>

  <!-- Hidden Panel -->
  <div
    id="bell-panel"
    class="fixed bottom-32 right-10 z-40 w-64 p-4 bg-primary-44 rounded-lg shadow-xl
           transform scale-0 origin-bottom-right transition-transform duration-200"
  >
    <h2 class="text-lg font-bold mb-2 text-white">
      CONTÁCTANOS PARA SUMARTE AL CAMBIO
    </h2>
    <form class="flex flex-col items-center w-full max-w-xs mx-auto">
      <input
        name="newsletterEmail"
        type="email"
        required
        placeholder="Tu correo electrónico"
        class="w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-green-500"
      />
      <button
        type="submit"
        class="px-5 py-2 mt-3 bg-green-500 text-white rounded-full font-semibold hover:bg-green-600 transition-colors"
      >
        Suscribirse
      </button>
    </form>
  </div>
</div>

<script type="module">
  const button = document.getElementById("bell-button");
  const panel = document.getElementById("bell-panel");
  let isOpen = false;

  button.addEventListener("click", () => {
    isOpen = !isOpen;
    panel.classList.toggle("scale-100", isOpen);
    panel.classList.toggle("scale-0", !isOpen);
  });
</script>
